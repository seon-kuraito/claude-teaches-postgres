# PostgreSQL 學習系統規格書

## MVP 目標

讓前端專案能夠使用 PostgreSQL 資料庫（含最小限度的 Docker 設定）。

---

## 系統架構

採用 **Slash Commands + 結構化文件** 的方式，讓 Claude 每次啟動時：
- 透過「理解」設定檔來執行任務（而非依賴對話記憶）
- 保持乾淨的 context，避免過長導致品質下降

---

## 四個角色設定

### 1. 規劃者 `/planner`

**職責**：
- 根據 MVP 需求，規劃課程大綱與章節（知識點）
- 定義各角色的用途與執行方式
- 章節以「一個知識點」為單位，盡可能拆細

**輸出**：
- `docs/curriculum/00-課程大綱.md` — 課程大綱總覽
- `docs/curriculum/XX-章節名稱.md` — 各章節詳細規劃

---

### 2. 教學者 `/teacher`

**職責**：
- 根據規劃者設計的章節知識點
- 撰寫「三歲小孩都能看懂」的解說文件

**輸出**：
- `docs/chapters/XX-章節名稱.md` — 各章節教學內容

---

### 3. 出題者 `/examiner`

**職責**：
- 根據規劃者設定的章節
- 設計適合的檢核方式（填空、申論等）

**輸出**：
- `docs/exams/XX-章節名稱-exam.md` — 測驗題目
- `docs/exams/XX-章節名稱-answer.md` — 空白答案模板（供學習者直接編輯填寫）

---

### 4. 批改者 `/grader`

**職責**：
- 讀取學習者填寫的答案檔（`XX-章節名稱-answer.md`）
- 根據出題者設計的檢核點進行批改
- 以「三歲小朋友都能理解的比喻」解說答案與回饋

**輸出**：
- `docs/feedback/XX-章節名稱-YYYYMMDD.md` — 批改紀錄與回饋

**使用流程**：
1. 學習者直接編輯 `docs/exams/XX-章節名稱-answer.md` 填寫答案
2. 執行 `/grader` 批改該檔案
3. 批改結果儲存至 `docs/feedback/`

---

## 檔案結構

```
.claude/
├── CLAUDE.md            # 專案規範（自動載入）
└── commands/
    ├── planner.md       # 規劃者命令
    ├── teacher.md       # 教學者命令
    ├── examiner.md      # 出題者命令
    └── grader.md        # 批改者命令

docs/
├── 學習進度.md          # 學習進度追蹤（自動更新）
├── curriculum/          # 課程大綱（規劃者產出）
│   ├── 00-課程大綱.md   # 大綱總覽
│   └── XX-章節名稱.md   # 各章節詳細規劃
├── chapters/            # 教學內容（教學者產出）
│   └── XX-章節名稱.md
├── exams/               # 測驗相關（出題者產出）
│   ├── XX-章節名稱-exam.md     # 題目
│   └── XX-章節名稱-answer.md   # 答案檔（學習者直接編輯此檔填寫答案）
└── feedback/            # 批改紀錄（批改者產出）
    └── XX-章節名稱-YYYYMMDD.md
```

---

## 設計原則

1. **用理解代替記憶**：每次啟動讀取設定檔，不依賴對話歷史
2. **知識點最小化**：每個章節只教一個概念，降低認知負擔
3. **三歲小孩標準**：所有解說都要簡單到幼兒能理解
4. **持久化紀錄**：學習回饋記錄在 `docs/feedback/`
5. **Docker 作為章節**：Docker 相關設定（如 docker-compose.yml）應設計成教學章節，由 `/teacher` 在教學過程中產出，而非獨立設定檔

---

## 進度追蹤機制

### 學習進度.md 格式

```markdown
# 學習進度

最後更新：YYYY-MM-DD

---

## 學習概況

| 項目 | 進度 |
|------|------|
| 已完成章節 | X / Y |
| 已完成測驗 | X / Y |
| 平均成績 | XX% |
| 學習天數 | X 天 |

---

## 章節進度

| 章節 | 名稱 | 教學 | 測驗 | 成績 | 完成日期 |
|------|------|------|------|------|----------|
| 01 | 章節名稱 | ✅ | ✅ | 85% | 2024-01-15 |
| 02 | 章節名稱 | ✅ | 🔄 | 60% | 2024-01-16 |
| 03 | 章節名稱 | ✅ | - | - | 2024-01-17 |
| 04 | 章節名稱 | - | - | - | - |

圖示說明：
- ✅ 已完成且通過
- 🔄 需複習
- - 尚未進行

---

## 需複習章節

1. 第 02 章：章節名稱（成績 60%，建議於 2024-01-20 後重測）

---

## 下一步建議

1. 繼續學習第 04 章
2. 複習第 02 章後重新測驗
```

### 自動更新規則

- `/teacher` 執行後：標記該章節「教學 ✅」，更新完成日期
- `/grader` 執行後：
  - 更新「測驗」狀態（✅ 或 🔄）
  - 記錄成績
  - 若需複習，加入「需複習章節」清單並建議複習日期（3 天後）
  - 重新計算平均成績和學習天數

---

## 檔案命名規範

### 章節編號
- 統一使用**兩位數**：`01`, `02`, ..., `99`
- 即使只有少於 10 章，仍使用 `01` 而非 `1`
- 範例：`01-認識資料庫.md`, `02-安裝PostgreSQL.md`

### 日期格式
- 統一使用 `YYYYMMDD` 格式
- 範例：`20241216`（2024 年 12 月 16 日）

### 檔名規則
- 章節檔名：`XX-章節名稱.md`
- 測驗檔名：`XX-章節名稱-exam.md`
- 答案檔名：`XX-章節名稱-answer.md`
- 批改檔名：`XX-章節名稱-YYYYMMDD.md`

### 字元規範
- 使用繁體中文命名（符合專案語言）
- 避免特殊字元（`/`, `\`, `:`, `*`, `?`, `"`, `<`, `>`, `|`）
- 空格以 `-` 分隔（若需要）

---

## 檔案覆寫與版本控制策略

### 覆寫規則

各目錄的檔案覆寫處理方式：

| 目錄 | 檔案類型 | 覆寫規則 |
|------|---------|---------|
| `curriculum/` | 課程大綱 | 覆寫前詢問使用者確認 |
| `chapters/` | 教學內容 | 覆寫前詢問使用者確認 |
| `exams/` | 測驗題目 | 覆寫前詢問使用者確認 |
| `exams/` | 答案檔案 | **不可覆寫**（若已存在，警告使用者可能會遺失填寫的答案） |
| `feedback/` | 批改記錄 | **永不覆寫**（用日期區分版本：`XX-章節名稱-YYYYMMDD.md`） |
| `學習進度.md` | 進度追蹤 | 自動更新（增量修改，不覆寫整個檔案） |

### 版本控制建議

#### Feedback 目錄
- 同一章節可多次批改
- 檔名格式：`XX-章節名稱-YYYYMMDD.md`
- 範例：
  ```
  01-認識資料庫-20241215.md  # 第一次批改
  01-認識資料庫-20241220.md  # 複習後重測
  01-認識資料庫-20241225.md  # 再次重測
  ```

#### Answer 檔案
- 若學習者已填寫答案，重新執行 `/examiner` 不應覆寫
- 建議在 `/examiner` 執行時檢查：
  ```
  若 answer.md 已存在 → 詢問：
    1. 保留現有答案檔（不產出）
    2. 備份後產出新模板（將舊檔案重新命名為 XX-章節名稱-answer-backup-YYYYMMDD.md）
  ```

#### 其他檔案
- 產出前檢查檔案是否存在
- 若存在，詢問使用者：
  - 覆寫（直接取代）
  - 取消（不產出）
  - 比較差異後決定

---

## 使用流程

```
1. 執行 /planner  → 產出課程大綱（curriculum/）
2. 執行 /teacher  → 根據大綱撰寫教學內容（chapters/）
3. 執行 /examiner → 設計測驗與答案模板（exams/）
4. 執行 /grader   → 批改並記錄回饋（feedback/）
```
